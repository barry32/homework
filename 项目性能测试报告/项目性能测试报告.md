## 项目性能测试报告

#### 01 测试目的

评估项目的性能找出项目能够承受的TPS，预估出服务能承受的最大并发数，提高性能质量

#### 02 测试工具

![image-20220806185532353](.\图片\image-20220806185532353.png)

#### 03测试环境

#### 3.1环境

| 指标      | 参数                         |
| --------- | ---------------------------- |
| Nginx机器 | 2C8G 8Mbps带宽               |
| 服务      | 2C4G  6Mbps带宽              |
| 测试版本  | 1.0                          |
| 数据库    | 2C4G                         |
| 集群规模  | Nginx做流量网关 共计两台服务 |

#### 4测试场景

测试场景压测最重要接口

**情况 模拟低延时场景，**用户访问接口并发逐渐增加的过程。接口的响应时间为22ms，线程梯度：5、10、15、20、25、30、35、40个线程，500次;

- 时间设置：Ramp-up period(inseconds)的值设为对应线程数
- 测试总时长：约等于22ms x 500次 x 8 = 88s = 1.46分

#### 5. 核心接口的测试结果

1. 获取省市区信息接口

2. 验证hero_mall服务获取商品信息接口能力性能。**目标峰值TPS：1000，P99响应时间：300ms**

   Active Threads：注意压力机的活动线程数并不等同于在线用数中，并发的用户数。压力活动线程数是用来模拟用户发出并发请求的操作。

   - 压力机-活动线程数  =模拟=> 系统并发用户数
   - 系统并发用户数 =不等于=>  压力机-活动线程数  

   TPS、RT![微信截图_20240520214351](.\图片\微信截图_20240520214351.png)

   ![微信截图_20240520214536](.\图片\微信截图_20240520214536.png)

#### 06 测试结论

![微信截图_20240520214941](.\图片\微信截图_20240520214941.png)

![微信图片_20240520214915](.\图片\微信图片_20240520214915.png)

性能瓶颈分析：

带宽瓶颈：

当前接口属于低延时接口，单个服务的带宽在6Mbps， TPS可以达到700多，两台机器预估可以达到1500TPS。Nginx分发流量受制于8Mbps的限制，

所以单台机器只收到3Mbps的流量请求，导致TPS只达到1000多，但也体现了Nginx流量网关的作用。故当前的主要瓶颈在于带宽。

Tomcat线程数已经优化过，所以不存在Tomcat的优化。

